webpackJsonp([1],{"4ml/":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("/5sW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(e){a("x+5b")},null,null).exports,o=a("/ocq"),r=a("mtWM"),c=a.n(r);function l(e){return c.a.create({baseURL:"http://115.159.209.160:8080/storage",timeout:1e4,headers:{"Content-Type":"application/x-www-form-urlencoded"}})(e)}c.a.defaults.withCredentials=!0,c.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",c.a.defaults.headers["X-CSRF-TOKEN"]="[[${_csrf.token}]]";var u=function(e){return l({url:"/editBirth",method:"put",data:e})},m=a("Fd2+"),d={name:"login",data:function(){return{username:"",password:"",showPass:!1,email:"",showCode:!1,newPass:"",passCheck:"",code:""}},methods:{checkPass:function(){return this.newPass===this.passCheck},onSubmit:function(e){var t,a=this;(t=e,l({url:"/doLogin",method:"post",data:t})).then(function(e){e.data?(a.$store.commit("setUserId",e.data.id),a.$store.commit("setUsername",e.data.username),Object(m.b)({type:"success",message:"登录成功"}),a.$router.push("/accounts")):Object(m.b)({type:"warning",message:"用户名或密码错误"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})},sign:function(){this.$router.push("/sign")},findPass:function(){this.showPass=!1;var e,t=this;(e=this.email,l({url:"/findPass?email="+e})).then(function(e){1===e.data?(Object(m.c)("服务器已将验证码发送至您的邮箱，请注意查收"),setTimeout(function(){t.showCode=!0},2e3)):m.c.fail("该邮箱不存在")})},setPass:function(){var e,t=new URLSearchParams;t.append("code",this.code),t.append("email",this.email),t.append("newPass",this.newPass),this.code="",this.email="",this.newPass="",this.showCode=!1,(e=t,l({url:"/setPass",method:"post",data:e})).then(function(e){1===e.data?m.c.success("密码重置成功，请返回登录"):m.c.fail("验证码错误")})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e._v(" "),a("div",{staticClass:"loginForm"},[e._m(1),e._v(" "),a("van-form",{attrs:{"label-width":"50px"},on:{submit:e.onSubmit}},[a("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("div",{staticStyle:{margin:"16px 16px 5px 16px"}},[a("van-button",{attrs:{square:"",hairline:"",type:"info",block:"",size:"small","native-type":"submit"}},[e._v("登录")])],1),e._v(" "),a("div",{staticStyle:{margin:"0 16px"}},[a("van-button",{attrs:{square:"",plain:"",hairline:"",type:"info",block:"",size:"small"},on:{click:e.sign}},[e._v("注册")])],1)],1),e._v(" "),a("div",{staticStyle:{margin:"5px 16px"}},[a("van-button",{attrs:{square:"",plain:"",hairline:"",color:"#A4A4A4",size:"mini"},on:{click:function(t){e.showPass=!0}}},[e._v("找回密码")])],1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"找回密码","show-confirm-button":!1},model:{value:e.showPass,callback:function(t){e.showPass=t},expression:"showPass"}},[a("van-form",{attrs:{"label-width":"50px"},on:{submit:e.findPass}},[a("van-field",{attrs:{name:"email",label:"邮箱",placeholder:"输入注册时使用的邮箱",rules:[{required:!0,message:"请填写邮箱"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("van-button",{attrs:{block:"",plain:"",hairline:"","native-type":"submit"}},[e._v("确认")])],1),e._v(" "),a("van-button",{attrs:{block:"",hairline:"",plain:"",color:"#848484"},on:{click:function(t){e.showPass=!1}}},[e._v("取消")])],1)],1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"重置密码","show-confirm-button":!1},model:{value:e.showCode,callback:function(t){e.showCode=t},expression:"showCode"}},[a("van-form",{attrs:{"label-width":"70px"},on:{submit:e.setPass}},[a("van-field",{attrs:{name:"code",label:"验证码",placeholder:"输入发送至您邮箱的4位验证码",rules:[{required:!0,message:"验证码"}]},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"check",label:"确认密码",placeholder:"确认密码",rules:[{validator:e.checkPass,message:"确认密码不一致"}]},model:{value:e.passCheck,callback:function(t){e.passCheck=t},expression:"passCheck"}}),e._v(" "),a("van-button",{attrs:{block:"",plain:"",hairline:"","native-type":"submit"}},[e._v("确认")])],1),e._v(" "),a("van-button",{attrs:{block:"",hairline:"",plain:"",color:"#848484"},on:{click:function(t){e.showCode=!1}}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("资料仓库")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-head"},[t("span",[this._v("账号登录")])])}]};var p=a("VU/8")(d,h,!1,function(e){a("WpCq")},"data-v-75424cc8",null).exports,b=a("Dd8w"),v=a.n(b),f=a("NYxO"),g={name:"index",props:["iconName"],data:function(){return{}},computed:v()({},Object(f.b)(["userId","username"])),methods:{goPage:function(e){"/setting"===e?this.$router.push({path:e}):"/accounts"!==this.$route.path?this.$router.push({path:"/accounts"}):this.$router.push({path:"/birthInfo"})}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-icon",{staticClass:"menu-icon-exchange",attrs:{name:"exchange",size:"25px"},on:{click:function(t){return e.goPage("/")}}}),e._v(" "),a("van-icon",{staticClass:"menu-icon-setting",attrs:{name:e.iconName,size:"25"},on:{click:function(t){return e.goPage("/setting")}}})],1)},staticRenderFns:[]};var _=a("VU/8")(g,w,!1,function(e){a("zkIE")},"data-v-288c86f4",null).exports,k={name:"Accounts",computed:v()({},Object(f.b)(["userId"])),components:{MenuDialog:_},data:function(){return{value:"",activeNames:"1",showEdit:!1,showAdd:!1,accounts:[{}],submitForm:{name:"",account:"",password:""},echoForm:{id:"",name:"",account:"",password:""}}},created:function(){var e,t=this;(e=this.userId,l({url:"/accounts?userId="+e})).then(function(e){t.accounts=e.data}).catch(function(e){return console.log(e)})},methods:{onSearch:function(e){var t=this;(function(e,t){return l({url:"/accountOfName?name="+e+"&&userId="+t})})(e,this.userId).then(function(e){e.data?t.accounts=e.data:Object(m.b)({type:"warning",message:"暂无信息"})}).catch(function(e){return console.log(e)})},editBtn:function(e){this.echoForm=e,this.showEdit=!0},addBtn:function(){this.showAdd=!0},cancelEdit:function(){this.echoForm={}},editSubmit:function(){var e,t=this,a=new URLSearchParams;a.append("id",this.echoForm.id),a.append("userId",this.userId),void 0!==this.submitForm.name&&""!==this.submitForm.name&&a.append("name",this.submitForm.name),void 0!==this.submitForm.account&&""!==this.submitForm.account&&a.append("account",this.submitForm.account),void 0!==this.submitForm.password&&""!==this.submitForm.password&&a.append("password",this.submitForm.password),this.submitForm={},(e=a,l({url:"/editAccount",method:"put",data:e})).then(function(e){e.data?(Object(m.b)({type:"success",message:"修改成功"}),t.$router.go(0)):Object(m.b)({type:"warning",message:"修改失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})},addSubmit:function(){var e=this;this.showAdd=!1;var t,a=new URLSearchParams;a.append("name",this.submitForm.name),a.append("account",this.submitForm.account),a.append("password",this.submitForm.password),a.append("userId",this.userId),this.submitForm={},(t=a,l({url:"/addAccount",method:"post",data:t})).then(function(t){t.data?(Object(m.b)({type:"success",message:"新增成功"}),e.$router.go(0)):Object(m.b)({type:"warning",message:"新增失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",{attrs:{"offset-top":"0"}},[a("div",{staticClass:"s-title"},[a("MenuDialog",{attrs:{"icon-name":"user-o"}}),e._v(" "),a("span",[e._v("账号密码")])],1)]),e._v(" "),a("form",{attrs:{action:"/"}},[a("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:e.onSearch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("div",{staticClass:"add"},[a("van-button",{attrs:{type:"success",plain:"",block:""},on:{click:e.addBtn}},[a("van-icon",{staticClass:"add-icon",attrs:{name:"plus",size:"35px"}}),e._v("\n      新增\n    ")],1)],1),e._v(" "),a("div",[a("van-collapse",{attrs:{accordion:""},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.accounts,function(t,s){return a("van-collapse-item",{key:s,attrs:{name:s},scopedSlots:e._u([{key:"title",fn:function(){return[a("div",{staticStyle:{"font-size":"18px"}},[e._v(e._s(t.name))])]},proxy:!0}],null,!0)},[e._v(" "),a("p",[e._v("账号: "+e._s(t.account))]),e._v(" "),a("p",[e._v("密码: "+e._s(t.password))]),e._v(" "),a("p",{staticStyle:{"font-size":"12px"}},[e._v("最近更新时间: "+e._s(t.alterTime))]),e._v(" "),a("van-button",{attrs:{size:"small"},on:{click:function(a){return e.editBtn(t)}}},[e._v("更新信息")])],1)}),1)],1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"更新","show-cancel-button":""},on:{cancel:e.cancelEdit,confirm:e.editSubmit},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("van-form",{attrs:{"label-width":"50px"}},[a("van-field",{attrs:{name:"name",label:"名称",placeholder:e.echoForm.name,rules:[{required:!1,message:"请填写名称"}]},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}}),e._v(" "),a("van-field",{attrs:{name:"account",label:"账号",placeholder:e.echoForm.account,rules:[{required:!1,message:"请填写账号"}]},model:{value:e.submitForm.account,callback:function(t){e.$set(e.submitForm,"account",t)},expression:"submitForm.account"}}),e._v(" "),a("van-field",{attrs:{name:"password",label:"密码",placeholder:e.echoForm.password,rules:[{required:!1,message:"请填写密码"}]},model:{value:e.submitForm.password,callback:function(t){e.$set(e.submitForm,"password",t)},expression:"submitForm.password"}})],1)],1)],1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"新增","show-confirm-button":!1},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("van-form",{attrs:{"label-width":"50px"},on:{submit:e.addSubmit}},[a("van-field",{attrs:{name:"name",label:"名称",placeholder:"输入名称",rules:[{required:!0,message:"请填写名称"}]},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}}),e._v(" "),a("van-field",{attrs:{name:"account",label:"账号",placeholder:"输入账号",rules:[{required:!1,message:"请填写账号"}]},model:{value:e.submitForm.account,callback:function(t){e.$set(e.submitForm,"account",t)},expression:"submitForm.account"}}),e._v(" "),a("van-field",{attrs:{name:"password",label:"密码",placeholder:"输入密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.submitForm.password,callback:function(t){e.$set(e.submitForm,"password",t)},expression:"submitForm.password"}}),e._v(" "),a("van-button",{attrs:{block:"",plain:"",hairline:"","native-type":"submit"}},[e._v("确认")])],1),e._v(" "),a("van-button",{attrs:{block:"",hairline:"",plain:"",color:"#848484"},on:{click:function(t){e.showAdd=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(k,F,!1,function(e){a("tuJG")},"data-v-7b73a223",null).exports,y={name:"BirthInfo",components:{MenuDialog:_},computed:v()({},Object(f.b)(["userId"])),data:function(){return{value:"",showEdit:!1,showAdd:!1,submitForm:{name:"",birth:"",subscribe:!1},birthInfo:[],echoFrom:{id:"",name:"",birth:""},birth_pattern:/^[0-1]+[1-9]+\-+[0-3]+[0-9]/}},created:function(){var e,t=this;(e=this.userId,l({url:"/birthInfo?userId="+e})).then(function(e){t.birthInfo=e.data})},methods:{onSearch:function(e){var t=this;(function(e,t){return l({url:"/birthOfName?name="+e+"&&userId="+t})})(e,this.userId).then(function(e){e.data?t.birthInfo=e.data:Object(m.b)({type:"warning",message:"暂无信息"})}).catch(function(e){return console.log(e)})},editBtn:function(e){this.echoFrom=e,this.showEdit=!0},addBtn:function(){this.showAdd=!0},cancelEdit:function(){this.echoForm={}},editSubmit:function(){var e=this,t=new URLSearchParams;t.append("userId",this.userId),t.append("id",this.echoFrom.id),void 0!==this.submitForm.name&&""!==this.submitForm.name&&t.append("name",this.submitForm.name),void 0!==this.submitForm.birth&&""!==this.submitForm.birth?t.append("birth",this.submitForm.birth):t.append("birth",this.echoFrom.birth),this.submitForm={},u(t).then(function(t){1===t.data?(Object(m.b)({type:"success",message:"修改成功"}),e.$router.go(0)):Object(m.b)({type:"warning",message:"修改失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})},addSubmit:function(){var e=this;this.showAdd=!1;var t,a=new URLSearchParams;a.append("name",this.submitForm.name),a.append("userId",this.userId),a.append("birth",this.submitForm.birth),a.append("subscribe",this.submitForm.subscribe),this.submitForm={},(t=a,l({url:"/addBirth",method:"post",data:t})).then(function(t){1===t.data?(Object(m.b)({type:"success",message:"新增成功"}),e.$router.go(0)):Object(m.b)({type:"warning",message:"新增失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})},delBtn:function(e){var t=this;(function(e){return l({url:"/deleteBirth?id="+e,method:"delete"})})(e).then(function(e){1===e.data?(Object(m.b)({type:"success",message:"删除成功"}),t.$router.go(0)):Object(m.b)({type:"warning",message:"删除失败"})}).catch(function(e){Object(m.b)({type:"danger",message:"请求失败"})})},subscribe:function(e){var t=e.subscribe,a=new URLSearchParams;a.append("id",e.id),a.append("subscribe",e.subscribe),u(a).then(function(e){1===e.data&&(!0===t?m.c.success("确认订阅"):m.c.fail("取消订阅"))}).catch(function(e){Object(m.b)({type:"danger",message:"请求失败"})})}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",{attrs:{"offset-top":"0"}},[a("div",{staticClass:"s-title"},[a("menu-dialog",{attrs:{"icon-name":"user-o"}}),e._v(" "),a("span",[e._v("生日信息")])],1)]),e._v(" "),a("form",{attrs:{action:"/"}},[a("van-search",{attrs:{placeholder:"请输入搜索关键词"},on:{search:e.onSearch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("div",{staticClass:"add"},[a("van-button",{attrs:{type:"success",plain:"",block:""},on:{click:e.addBtn}},[a("van-icon",{staticClass:"add-icon",attrs:{name:"plus",size:"35px"}}),e._v("\n      新增\n    ")],1)],1),e._v(" "),a("div",e._l(e.birthInfo,function(t,s){return a("van-swipe-cell",{key:s,staticStyle:{"margin-bottom":"5px"},attrs:{"right-width":"70px"},scopedSlots:e._u([{key:"right",fn:function(){return[a("van-button",{staticClass:"btn",attrs:{square:"",text:"编辑",plain:"",type:"info"},on:{click:function(a){return e.editBtn(t)}}}),e._v(" "),a("van-button",{staticClass:"btn",attrs:{square:"",text:"删除",plain:"",type:"warning"},on:{click:function(a){return e.delBtn(t.id)}}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"content"},[a("van-icon",{staticClass:"icon",attrs:{name:"contact",size:"50"}}),e._v(" "),a("div",{staticClass:"text"},[a("p",[e._v("姓名: "+e._s(t.name))]),e._v(" "),a("p",[e._v("生日: "+e._s(t.birth))]),e._v(" "),a("div",{staticClass:"subscribe"},[a("p",[e._v("订阅")]),e._v(" "),a("van-switch",{attrs:{"active-color":"#BCF5A9","inactive-color":"#dcdee0",size:"20px"},on:{change:function(a){return e.subscribe(t)}},model:{value:t.subscribe,callback:function(a){e.$set(t,"subscribe",a)},expression:"item.subscribe"}})],1)])],1)])}),1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"编辑","show-cancel-button":""},on:{cancel:e.cancelEdit,confirm:e.editSubmit},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("van-form",{attrs:{"label-width":"50px"}},[a("van-field",{attrs:{name:"name",label:"姓名",placeholder:e.echoFrom.name,rules:[{required:!1,message:"请填写姓名"}]},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}}),e._v(" "),a("van-field",{attrs:{name:"birth",label:"生日",placeholder:e.echoFrom.birth,rules:[{pattern:e.birth_pattern,message:"请填写生日"}]},model:{value:e.submitForm.birth,callback:function(t){e.$set(e.submitForm,"birth",t)},expression:"submitForm.birth"}})],1)],1)],1),e._v(" "),a("div",[a("van-dialog",{attrs:{title:"新增","show-confirm-button":!1},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("van-form",{attrs:{"label-width":"70px"},on:{submit:e.addSubmit}},[a("van-field",{attrs:{name:"name",label:"姓名",placeholder:"输入姓名",rules:[{required:!0,message:"请填写姓名"}]},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}}),e._v(" "),a("van-field",{attrs:{name:"birth",label:"生日",placeholder:"生日格式为 MM-dd 例如 05-25",rules:[{pattern:e.birth_pattern,message:"请正确填写生日格式"}]},model:{value:e.submitForm.birth,callback:function(t){e.$set(e.submitForm,"birth",t)},expression:"submitForm.birth"}}),e._v(" "),a("van-field",{attrs:{name:"switch",label:"生日订阅"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-switch",{attrs:{size:"20"},model:{value:e.submitForm.subscribe,callback:function(t){e.$set(e.submitForm,"subscribe",t)},expression:"submitForm.subscribe"}})]},proxy:!0}])}),e._v(" "),a("van-button",{attrs:{block:"",plain:"",hairline:"","native-type":"submit"}},[e._v("确认")])],1),e._v(" "),a("van-button",{attrs:{block:"",hairline:"",plain:"",color:"#848484"},on:{click:function(t){e.showAdd=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(y,C,!1,function(e){a("pzM/")},"data-v-7f07a3bd",null).exports,P={name:"Setting",components:{MenuDialog:_},computed:v()({},Object(f.b)(["username","userId"])),data:function(){return{numOfAccount:0,numOfBirthInfo:0,phone:"",email:"",showEdit:!1,submitForm:{name:"",phone:"",email:""},echoFrom:{username:"",phone:"",email:""},phone_pattern:/1\d{10}/,email_pattern:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,showAlter:!1,oldPass:"",newPass:"",passCheck:""}},created:function(){var e,t,a=this;(e=this.userId,l({url:"/getNumOfAcc?userId="+e})).then(function(e){e.data&&(a.numOfAccount=e.data)}).catch(function(e){return console.log(e)}),function(e){return l({url:"/getNumOfBir?userId="+e})}(this.userId).then(function(e){e.data&&(a.numOfBirthInfo=e.data)}).catch(function(e){return console.log(e)}),(t=this.userId,l({url:"/getAdmin?id="+t})).then(function(e){e.data&&(a.phone=e.data.phone,a.email=e.data.email)})},methods:{logout:function(e){var t=this;m.a.confirm({title:"注销",message:"是否注销登录"}).then(function(){l({url:"/logout",method:"post"}).then(function(e){e.data?t.$router.push("/login"):Object(m.b)({type:"warning",message:"注销失败"})}).catch(function(e){Object(m.b)({type:"danger",message:"请求失败"})})}).catch(function(){})},editBtn:function(e,t){this.echoFrom.username=this.username,this.echoFrom.phone=e,this.echoFrom.email=t,this.showEdit=!0},editSubmit:function(){var e,t=this,a=new URLSearchParams;a.append("id",this.userId),void 0!==this.submitForm.name&&""!==this.submitForm.name?a.append("username",this.submitForm.name):a.append("username",this.username),void 0!==this.submitForm.phone&&""!==this.submitForm.phone&&a.append("phone",this.submitForm.phone),void 0!==this.submitForm.email&&""!==this.submitForm.email&&a.append("email",this.submitForm.email),this.submitForm={},(e=a,l({url:"/editAdmin",method:"put",data:e})).then(function(e){1===e.data?(Object(m.b)({type:"success",message:"修改成功"}),t.$router.go(0)):Object(m.b)({type:"warning",message:"修改失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})},checkPass:function(){return this.newPass===this.passCheck},alterPass:function(){var e,t=new URLSearchParams;t.append("oldPass",this.oldPass),t.append("newPass",this.newPass),t.append("userId",this.userId),this.showAlter=!1,(e=t,l({url:"/alterPass",method:"put",data:e})).then(function(e){1===e.data?Object(m.b)({type:"success",message:"修改成功"}):Object(m.b)({type:"warning",message:"旧密码错误，修改失败"})}).catch(function(e){console.log(e),Object(m.b)({type:"danger",message:"请求失败"})})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-sticky",{attrs:{"offset-top":0}},[a("div",{staticClass:"s-title"},[a("MenuDialog",{attrs:{"icon-name":"manager"}}),e._v(" "),a("span",[e._v("个人信息")])],1)]),e._v(" "),a("div",{staticClass:"admin"},[a("van-icon",{staticClass:"admin-icon",attrs:{name:"user-o",size:"70px"}}),e._v(" "),a("span",{staticClass:"name"},[e._v(e._s(e.username))]),e._v(" "),a("span",{staticClass:"phone"},[e._v(e._s(e.phone))]),e._v(" "),a("span",{staticClass:"email"},[e._v(e._s(e.email))]),e._v(" "),a("van-button",{staticClass:"editBtn",attrs:{size:"mini",plain:"",hairline:"",type:"info"},on:{click:function(t){return e.editBtn(e.phone,e.email)}}},[e._v("    编辑    ")]),e._v(" "),a("van-button",{staticClass:"alterBtn",attrs:{size:"mini",plain:"",color:"#A4A4A4"},on:{click:function(t){e.showAlter=!0}}},[e._v("修改密码")])],1),e._v(" "),a("div",{staticClass:"info"},[a("ul",[a("li",[a("van-icon",{staticClass:"info-icon",attrs:{name:"orders-o",size:"30px"}}),e._v(" "),a("span",[e._v("管理的账号密码: "+e._s(e.numOfAccount))])],1),e._v(" "),a("li",[a("van-icon",{staticClass:"info-icon",attrs:{name:"user-circle-o",size:"30px"}}),e._v(" "),a("span",[e._v("记录的生日信息: "+e._s(e.numOfBirthInfo))])],1)])]),e._v(" "),a("van-button",{attrs:{block:"",color:"#A4A4A4"},on:{click:function(t){return e.logout(e.userId)}}},[e._v("注销")]),e._v(" "),a("van-dialog",{attrs:{title:"编辑","show-cancel-button":""},on:{confirm:e.editSubmit},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("van-form",{attrs:{"label-width":"50px"}},[a("van-field",{attrs:{name:"name",label:"名称",placeholder:e.echoFrom.username,rules:[{required:!0,message:"请填写名称"}]},model:{value:e.submitForm.name,callback:function(t){e.$set(e.submitForm,"name",t)},expression:"submitForm.name"}}),e._v(" "),a("van-field",{attrs:{name:"phone",label:"手机号",placeholder:e.echoFrom.phone,rules:[{pattern:e.phone_pattern,message:"请填写手机号"}]},model:{value:e.submitForm.phone,callback:function(t){e.$set(e.submitForm,"phone",t)},expression:"submitForm.phone"}}),e._v(" "),a("van-field",{attrs:{name:"password",label:"邮箱",placeholder:e.echoFrom.email,rules:[{pattern:e.email_pattern,message:"请填写邮箱"}]},model:{value:e.submitForm.email,callback:function(t){e.$set(e.submitForm,"email",t)},expression:"submitForm.email"}})],1)],1),e._v(" "),a("van-dialog",{attrs:{title:"修改密码","show-confirm-button":!1},model:{value:e.showAlter,callback:function(t){e.showAlter=t},expression:"showAlter"}},[a("van-form",{attrs:{"label-width":"70px"},on:{submit:e.alterPass}},[a("van-field",{attrs:{name:"oldPass",type:"password",label:"旧密码",placeholder:"填写旧密码",rules:[{required:!0,message:"请填写旧密码"}]},model:{value:e.oldPass,callback:function(t){e.oldPass=t},expression:"oldPass"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"password",label:"新密码",placeholder:"新密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.newPass,callback:function(t){e.newPass=t},expression:"newPass"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"check",label:"确认密码",placeholder:"确认密码",rules:[{validator:e.checkPass,message:"确认密码不一致"}]},model:{value:e.passCheck,callback:function(t){e.passCheck=t},expression:"passCheck"}}),e._v(" "),a("van-button",{attrs:{block:"",plain:"",hairline:"","native-type":"submit"}},[e._v("确认")])],1),e._v(" "),a("van-button",{attrs:{block:"",hairline:"",plain:"",color:"#848484"},on:{click:function(t){e.showAlter=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var S=a("VU/8")(P,O,!1,function(e){a("uOfb")},"data-v-07a7129c",null).exports,A={name:"Sign",data:function(){return{show:!0,username:"",password:"",check:"",phone:"",email:"",phone_pattern:/1\d{10}/,email_pattern:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/}},methods:{checkPass:function(e){return this.password===this.check},sign:function(){var e,t=this,a=new URLSearchParams;a.append("username",this.username),a.append("password",this.password),a.append("phone",this.phone),a.append("email",this.email),(e=a,l({url:"/sign",method:"post",data:e})).then(function(e){if(1===e.data){var a=t;Object(m.b)({type:"success",message:"注册成功，2秒后将跳转到登录界面"}),setTimeout(function(){a.$router.push("/login")},2e3)}else 3===e.data?Object(m.b)({type:"warning",message:"用户名已存在，请重试"}):Object(m.b)({type:"warning",message:"该邮箱已被使用，请重新注册"})}).catch(function(e){Object(m.b)({type:"danger",message:"请求失败"})})},goLogin:function(){this.$router.push("/login")}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"sign-title"},[e._v("用户注册")]),e._v(" "),a("van-icon",{staticClass:"sign-icon",attrs:{name:"revoke",size:"25px"},on:{click:function(t){return e.$router.back()}}}),e._v(" "),a("van-form",{attrs:{"label-width":"70px"},on:{submit:e.sign}},[a("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("van-field",{attrs:{type:"password",name:"check",label:"确认密码",placeholder:"确认密码",rules:[{validator:e.checkPass,message:"确认密码不一致"}]},model:{value:e.check,callback:function(t){e.check=t},expression:"check"}}),e._v(" "),a("van-field",{attrs:{name:"phone",label:"手机号码",placeholder:"手机号码",rules:[{pattern:e.phone_pattern,message:"请输入正确的手机号码"}]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),e._v(" "),a("van-field",{attrs:{name:"email",label:"电子邮箱",placeholder:"电子邮箱",rules:[{pattern:e.email_pattern,message:"请填写正确的电子邮箱"}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("注册")])],1)],1),e._v(" "),a("p",{staticClass:"p-des"},[e._v("请如实填写邮箱，注册完成后，将通过1461987661@qq.com发送注册成功邮件到你填写的邮箱中，届时请注意查收并认真阅读")]),e._v(" "),a("van-dialog",{attrs:{title:"注册事项","show-cancel-button":"","show-confirm-button":!1,showCancelButton:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",{staticClass:"agree"},[a("p",[e._v("你注册成功后，在网页上提交的数据将存储在郭友光的服务器上，安全性无法保证，责任请自行承担。不过一般也没人知道这个网址，此网站会持续更新提供更好，更安全的服务。")]),e._v(" "),a("van-button",{staticClass:"left-btn",attrs:{type:"danger",size:"small"},on:{click:e.goLogin}},[e._v("不同意")]),e._v(" "),a("van-button",{staticClass:"right-btn",attrs:{type:"info",size:"small"},on:{click:function(t){e.show=!1}}},[e._v("同意")])],1)])],1)},staticRenderFns:[]};var j=a("VU/8")(A,$,!1,function(e){a("SpCz")},"data-v-bfea8f1a",null).exports;s.a.use(o.a);var z=new o.a({routes:[{path:"/login",name:"login",component:p},{path:"/",component:p},{path:"/accounts",name:"accounts",component:x},{path:"/birthInfo",name:"birthInfo",component:I},{path:"/setting",name:"setting",component:S},{path:"/sign",name:"sign",component:j}]}),E=a("mvHQ"),q=a.n(E);s.a.use(f.a);var B=new f.a.Store({state:{userId:"",username:""},getters:{userId:function(e){var t=e.userId;return t||(t=JSON.parse(window.sessionStorage.getItem("userId")||null)),t},username:function(e){var t=e.username;return t||(t=JSON.parse(window.sessionStorage.getItem("username")||null)),t}},mutations:{setUserId:function(e,t){e.userId=t,window.sessionStorage.setItem("userId",q()(t))},setUsername:function(e,t){e.username=t,window.sessionStorage.setItem("username",q()(t))}},actions:{}});a("4ml/");s.a.use(m.d),s.a.config.productionTip=!1,new s.a({el:"#app",router:z,store:B,render:function(e){return e(i)}}),z.beforeEach(function(e,t,a){"/login"===e.path||"/sign"===e.path?a():window.sessionStorage.getItem("userId")?a():(m.c.fail("您尚未登录，请登录"),a("/login"))})},SpCz:function(e,t){},WpCq:function(e,t){},"pzM/":function(e,t){},tuJG:function(e,t){},uOfb:function(e,t){},"x+5b":function(e,t){},zkIE:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f6aab075dc5da91eae0c.js.map